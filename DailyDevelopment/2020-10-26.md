# 2020-10-26

## [소셜 네트워크 서비스의 아키텍처에 대하여](https://d2.naver.com/helloworld/551588)
- 소셜 네트워크 서비스를 하기 위해서 어떠한것들이 요구 될까?
  - 일반적인 메일, 메시전, 커뮤니티 서비스와 페이스북, 라인 서비스는 어떠한 차이가 있을까?
    - 모아보기(뉴스피드, 타임라인)
  - 수십만명의 친구들의 게시글을 가져오는 기능을 구현한다면 어떤한 점들을 생각해야할까?
    - 캐시, 샤드
  - 샤드를 사용한다면 곳곳에 흩어져 있는 글들을 효율적으로 관리할 수 없을까??
    - 범위를 지정하여 사용해보자(하나의 방법)
  - 복잡하게 얽혀있는 컨텐츠와 유저 데이터들을 최소한으로 관리할 수는 없을까??
    - 그래프 자료구조(한번 조사해보자)
  - 게시판 방식을 사용하는 페이스북과 이메일 방식을 사용하는 트위터
    - 트위터는 잛은 글을 사용한다.
    - 수십만명의 팔로워들에게 알람을 줄 수 있도록 이메일 방식을 사용한다.(PUSH)
    - Facebook이 시간 복잡도라는 비용을 냈다면, 트위터는 공간 복잡도라는 희생이 있다.
  - 서비스에 따른 Push와 Pull
    - pull의 길을 지나가기 위해서는 (검색) 시간을 지불해야 하고, push의 길을 지나기 위해서는 (인덱스) 공간을 지불해야 한다.

## [LINE 소셜 네트워크 서비스의 아키텍처](https://d2.naver.com/helloworld/809802)
- LINE 서비스는 어떻게 설계하고 구현하였을까?
  - LINE에는 홈서비스와 타임라인 서비스가 있다.
    - SNS 데이터 사용 패턴에 따른 서비스의 설계가 달라진다.
    - LINE에서 타임라인을 눌러 사용자가 자신의 타임라인을 방문할 때에는 친구들이 최근에 작성한 글의 목록을 보기 때문에 여러 친구의 최신 글을 넓고(친구들과 자신) 얕게(시간) 요청한다. 
    - 그에 반해 내가 작성한 글이 모여 있는 홈에서는 시간이 조금 지난 글을 좁고(자신) 깊게(시간) 요청하기 마련이다.
  - 홈을 지탱하는 아키텍처와 기술들은 무엇이 있을까?
    - Pull 아키텍쳐
    - 친구의 권한에 따른 SQL 조회
    - 샤딩
    - 캐시
    - 홈 목록 인덱스
  - 타임라인을 지탱하는 아키텍처와 기술들은 무엇이 있을까?
    - Push 아키텍쳐
    - NoSQL
    - TTL(팔로워의 최신의 글만 보여주기 위함)
    - Replica
    - 메시징 큐
  - 공통 콘텐츠 저장소
    - Hbase(NoSQL)
  - 관계 서버
    - Redis Cluster

## 정리
- 공간을 통해 시간의 이득을 볼것인가 시간을 통해 공간의 이득을 볼것인가?를 생각 할 수 있는 글들이였다.
- Push와 Pull방식에대해 좀 더 제대로 알수 있게되었다.
- 기존에 있는 서비스와 새롭게 나오는 서비스는 큰틀에서는 달라지는게 없는것 같다. 서비스를 설계 할때 기존의 서비스에는 비슷한 방향이 없는지 생각해보면 설계를 해야겠다.

