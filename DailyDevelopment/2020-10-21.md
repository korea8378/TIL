# 2020-10-21

## [동영상 플랫폼 개선기 1 - 신규 동영상 플랫폼의 구성](https://d2.naver.com/helloworld/3963776)
- 기존의 레거시한 코드들을 새로운 플랫폼으로 대체해야 할까??
  - 레거시한 코드들을 언어, 프레임워크, 기술들이 버전이 낮다. 그결과 개발자의 의지 저하 및 새로운 등장하는 오픈소스나 기술들의 지원을 받기 힘들다.
  - 기존의 두개의 플랫폼은 공통적인 부분들이 있지만 두곳에서 개발하기 때문에 복잡성이 올라가고 있다.
  - 동영상의 퀄리티가 올라가면서 지원되야 하는 부분들이 새롭게 생겼고 그만큼 요구하는 리소스도 증가하였다.
  - 모놀리식개발로 인하여 많은 수의 어플리케이션의 유지보수가 힘들다.
- MSA 방식으로 구성
  - Netflix OSS의 Spring Cloud
    - API Gateway - Zuul
      - 라우터, 필터
      - Eureka의 클라이언트
      - 서킷 브레이커
      - 로드 밸런싱
      - 모든 API의 진입점이 되므로 게이트웨이 장애는 전체 장애를 의미
    - Service Discovery - Eureka
      - 매번 네트워크 주소가 변경될 수 있는 분산 환경에서 노드 사이의 통신을 위해 네트워크 주소를 찾는 패턴
    - Circuit Breaker - Hystrix
      - 애플리케이션마다 별도의 스레드 풀을 두어 격리
      - 실패율을 모니터링해 문제가 발생하면 처리 요청을 차단 후 정상으로 회복되면 다시 요청을 처리

## 정리
- 레거시한 코드 및 시스템을 무작정 고치기보다는 무엇을 가지고 어떻게 개선할것이면 그리고 개선하는 이유를 반드시 생각해야하는것 같다.
- 모놀리식에 비해 MSA는 얻는 장점이 있다. 하지만 그만큼 서버의 구성이 많아지고 복잡성 올라가는 것 같다.(그만큼 재미있을꺼 같다!!!)

