# 프로젝트 성패를 결정짓는 데이터 모델링 이야기

## 3월 13일

### 17.식별자, 결코 만만한 대상이 아니다.

#### 미묘한 식별자의 세계
- 슈퍼 식별자는 업무 요건에 부적합한 데이터가 쌓일 수 있는 구조를 만드는 빌미를 제공하며, 엔터티의 인스턴스가 늘어나는 기준을 불명확하게 만들어 모델의 가독성을 훼손한다.
- 따라서 주 식별자는 데이터를 쌓는 기준이자, 동시에 엔터티 안에 존재하는 모든 속성의 결정자 역할을 하는 최소한의 속성이어야 한다.
- 슈퍼 식별자를 남용하게 되면 데이터 무결성이 깨질 수 있어 바람직하지 않으므로 주의해야 한다.

#### 당신이 알고 있던 것보다 넓고 깊은 주 식별자의 의미
- 주 식별자는 정규화 이론의 함수 종속성과 깊이 관련되어 있다.
- 주 식별자는 정규화의 기준으로 속성들에 대한 결정자 역할을 수행한다. 다시 말해 엔터티가 포함한 일반 속성들은 주 식별자에 완전히 종속되어야 한다.
- 결국 주 식별자는 데이터 집합을 성격에 맞게 분리하는 기준이다.
- 주 식별자는 엔터티에서 중복이 발생하지 않는 유일한 값을 가져야 한다.
- 논리 모델의 주 식별자는 물리 모델에서 기본 키가 되므로 당연하 얘기다.
- 엔터티에서 데이터의 유일성을 보장해주는 속성은 한 개 이상일 수 있으며, 전략적으로 이 중 하나만을 주 식별자로 선택한다.
- 주 식별자는 엔터티의 인스턴스가 증가하는 규칙을 의미하면서 동시에 엔터티 개체의 정체성 그 자체다.
- 더불어 주 식별자는 관계를 갖는 다른 엔터티의 조인 경로에도 영향을 줄 수 있다.

#### 주 식별자 
- 정규화의 기준으로 일반 속성의 결정자 역할을 수행한다. 즉, 주 식별자를 기준으로 정규화가 수행된다.
- 엔터티에서 중복이 발생하지 않는 유일한 값이 관리되어야 한다.
- 엔터티의 개체가 증가하는 규칙을 의미한다. 이는 업무 규칙을 근간으로 정의되어야 한다.
- 엔터티 개체의 정체성과 일맥상통하며 사실 엔터티명과 이음동의어라고 할 수 있다.
- 관계를 갖는 주변 엔터티의 조인 경로에 영향을 준다.
- 트랜잭션 성격의 엔터티의 경우 행위 발생의 주체와 대상이 주 식별자에 포함된다. 반대로 행위 엔터티의 주 식별자를 통해 행위의 엔터티를 식별 할 수 있다.

#### 관계와 식별자, 그리고 데이터에 대한 이해
- 책 참고(p.228 ~ p.232)

#### 식별자 상속을 고려한 식별/비식별 관계 선정의 기준
- 데이터 모델링 입문자가 궁금해하고 어려워하는 대표적인 것 하나가 부모 엔터티의 주 식별자를 자식 엔터티의 주 식별자로 상속해야 하는지다.
- 상위 엔터티의 주 식별자가를 자식 엔터티의 주 식별자로 상속된 경우를 식별 관계라고 한다.
    - ex) 상품과 상품가격
- 하위 엔터티의 일반 속성으로 내려간 경우를 비식별 관계라고 한다.
    - ex) 고객과 신용등급
- 관계는 ERD에서 관계션으로 표현되며 최종 관계 엔터티 혹은 관계 속성으로 실체화
- 즉, 관계는 부모의 주 식별자를 의미하는 논리적 속성인 것이지 조인의 경로라고 이해해서는 곤란하다.

#### 관계와 식별
- 관계의 심도가 깊은 구조에서 주 식별자를 전략적으로 구성하면, 다시 말해 상위 엔터티의 식별자를 적절히 상속하면 단계를 줄여 접근 효율을 높일 수 있다.
- 반대로 상위의 주 식별자를 상속 단절하여 인조 식별자로 대체하면 주 식별자가 단순해진다. 따라서 모델과 SQL도 함께 단순해진다.
- 주 식별자가 여러 개의 속성으로 구성되면 다른 엔터티들과의 관계가 복잡해지고 비효율적이 될 수 있다.
- 다만 이렇게 인조 식별자를 남용하면 앞서 언급한 주 식별자의 역할과 의미가 없어져서 데이터가 늘어나는 기준이 불명확해지며 구조적으로도 문제가 발생할 여지가 커짐은 항상 유념해야 한다.
