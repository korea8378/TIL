# 프로젝트 성패를 결정짓는 데이터 모델링 이야기

## 3월 6일

### 11.엔터티 모델링의 어려움을 극복할 방법론, 전략이 있다.

#### 엔터티 모델링이 어려운 이유는 경험재가 아니기 때문이다.
- 방금 그린 ERD는 잘 작동하는지, 다른 문제는 없는지 즉시 확인해볼 수는 없다.
- 모델은 아키텍처의 기저에 존재하여 구조적 문제가 당장 수면 위로 올라오지 않는다.
- 작성한 모델을 정량적으로 평가하는 것도 쉽지 않다.
- 이런 이유로 데이터 모델은 검증조차 쉽지 않다.

#### 업무 요건을 정확히 이해하고 정의한다는 것은 어려움
- 문제 영역을 정확히 파악하여 요구명세로 만들어낸다는 것은 굉장히 어려운 일이다.

#### 소프트웨어의 역할은 문제 영역을 시스템으로 옮기는 것이다.
- 소프트웨어의 역할은 인간이 지닌 문제를 컴퓨터로 해결하는 것이다.
- 사용자의 문제 영역은 인간의 영역이며 0과 1의 세계는 물리적인 영역이다.
- 소프트웨어는 이 두 영역 사이에 존재한다.
- 따라서 우리는 인간과 소프트웨어 그리고 물리라는 세 계층을 모두 이해해야 한다.

#### 문제 영역, 요구사항의 명확한 정의는 가능한 것일까
- IT가 당면한 여러 문제의 본질 하나는 문제 영역을 정확하게 정의할 수 없다는 것이다.
- 우리는 요구사항이 프로젝트가 끝날 때까지 변경된다는 사실을 너무도 분명히 알고 있다.
- 요구사항을 완벽히 통제하고 확정하는 것은 사실상 불가능하며, 요구사항은 항상 모호하다.
- 소프트웨어는 한 덩이에서 작은 모듈로, 다시 복잡한 세부 로직까지 계층적으로 구성된다.
- 요구사항을 상세화하고 명확히 정의하기가 어렵다.
- 문제 영역을 정확하게 이해하고 정의한다는 것은 불가능에 가깝다.

#### 복잡도 문제를 해결하려면 무엇이 필요한가
- 현실 세계의 업무는 복잡하다.
- 따라서 이를 시스템으로 옮겨놓은 소프트웨어도 복잡할 수밖에 없다.

#### 분할 정복
- 정보 기술이 찾은 복잡한 문제 풀이의 방법은 분할 정복이다.
- 여기에는 현실 세계의 특정 부분은 무시하여 문제를 간단하게 만드는 추상화 기법이 적용된다.
- 기능 관점으로 추상화한 UML의 유스케이스
- 데이터 관점으로 정규화된 엔터티가 모두 분할 정복의 산물이다.
- 어떤 이름으로 부르든 본질은 동일하다.
- 다만 분할 정복이 시스템의 복잡도를 덜어주는 것은 아님에 주의해야 한다.
- 소프트웨어의 복잡성을 분할 정복으로 해결할 수 없는 이유는 소프트웨어를 모듈화한다고 해서 로직도 모듈화되는 것은 아니기 때문이다.
- 결국 분할은 소프트웨어의 복잡도를 제거하는 것이 아니라 복잡도의 숲에서 길을 잃지 않고, 업무 영역을 시스템으로 옮기는 데 지치거나 압도되지 않도록 도와 줄 뿐이다.

#### 결론, 분류가 필요하다.
- 분할 정복은 필연적으로 분류 문제를 발생시킨다.
- 하지만 업무 도메인에서도 절대적인 기준을 찾을 수는 없다.
- 분류란 내가 생각하는 대상을 어디에 두고 어떻게 묶는냐는 것인데, 그 기준이 항상 애매하다.
- 해결하려는 문제가 너무 복잡하기 때문에 우리는 문제를 쪼갤수밖에 없다.
- 데이터 모델링에서는 정규화가 바로 분류의 핵심 기준이다.
- 우리는 가급적 변하지 않는 것에 집중해야 한다.
- 분류가 얼마만큼의 보편성을 획득할 수 있느냐의 문제로 귀결 된다.
- 엔터티 모델링의 어려움과 복잡도를 극복할 전략은 정규화 이론에 근거한 분류, 마스터 데이터를 중심으로 한 업무 행위의 주체와 대상 식별, Account 중심의 접근법, 명확한 분류다.
- 데이터 모델링이란 분류와 묶음이다.

#### 분류와 서브 타입
- 서브타입은 분류의 결과로 나뉜 유형이다.
- 즉, 전체와 부분을 명시적으로 구분하여 표현하는 방식이다.
- 어떤 것을 분류하는 이유는 대상의 본질을 분류하여 그 본연의 모습을 쉽게 이해하기 위해서다.
- 분명한 기준과 규칙을 가지고 복잡한 대상을 분류함으로써 그 대상을 구성하는 요소요소의 실체와 요소 사이의 미묘한 동질성이나 차이점 등을 이해할 수 있게 되는 것이다.
- 좋은 모델러는 데이터를 보고 전체집합과 부분집합을 잘 도출할 수 있는 분석력이 있는 사람이다.
- 즉, 분류를 잘할 수 있어야 한다.
- 어차피 테이블로 만들 때 하나로 통합하거나 서브타입별로 쪼개서 개별 테이블로 생성 할 건데 굳이 이렇게 해야 하느냐고 생각 할 수 있다.
- 하지만 논리 데이터 모델은 테이블 수준이 아닌 인간이 이해하기 적합한 수준으로 데이터를 관리하고 보는 뷰이다.

#### 서브타입과 E-R 패턴
- 책 p.135 ~ p.143 참고

#### 통합
- 통합이라는 것이 섞는다는 의미로 느껴져서, 결국 집합이 모호해지고 본질이 흐려지는 것처럼 생각될 수 도 있다.
- 그러나 통합이 필요한 이유는 동일한 체계를 가질 필요가 있고, 동일한 형태의 처리가 발생하기 때문이다. 
- 즉, 공통으로 사용할 속성들은 통합 엔터티에 두고, 자신만이 가지는 고유 속성들을 모아서 별도의 엔터티에 분리하여 유연성과 확장성을 얻을 수 있다.
- 물론 무리한 일반화와 통합으로 집합이 모호해지고 개체들의 본질이 희석될 수도 있다.
- 이런 경우에는 집합의 동질성과 통합의 적절성에 대한 재검토가 필요하며, 주제와 성격이 동질한 범위에서 적절하게 통합되었다면 각 개체 유형이 섞이지 않도록 적절한 구분(서브타입)을 지정하면 된다.
