# DevOps

## 1월 17일

### TDD

#### 다양한 테스트들
- Funtional Test/기능 테스트(Functional Test)
  - 기능 테스트란? 사용자의 관점에서 애플리케이션 외부를 테스트하는 것
  - 기능 테스트는 제대로 된 기능성을 갖춘 애플리케이션을 구축하도록 도와줍니다
- Unit Test/단위 테스트(Unit Test)
  - 단위 테스트란? 프로그래머 관점에서 그 내부를 테스트하는 것
  - 단위 테스트는 버그없이 깔끔한 코드가 되도록 도와줍니다
- Smoke Test/스모크 테스트(Smoke Test)
  - 스모크 테스트란? CSS 같은 정적 파일이 잘 로딩되었는지 테스트하는 것

#### Test Driven Development
- 테스트 주도 개발 : 테스트가 개발을 이끌어 나간다.
- 테스트를 먼저 만들고 테스트를 통과하기 위한 것을 짜는 것 즉, 만드는 과정에서 우선 테스트를 작성하고 그걸 통과하는 코드를 만들고를 반복하면서 제대로 동작하는지에 대한 피드백을 적극적으로 받는 것이다.
- 요구사항 분석 -> 설계 -> 개발 -> 테스트 -> 배포 개발법엔 소프트웨어 개발을 느리게 하는 잠재적 위험이 존재한다.

#### TDD의 원칙
- 오직 자동화된 테스트가 실패할 경우에만 새로운 코드를 작성한다.
- 중복을 제거한다.

#### TDD 개발법
1. 빨강 : 실패하는 작은 테스트 케이스를 작성한다. 처음에는 컴파일조차 안될 수 있다.
2. 초록 : 테스트를 통과하는 코드를 작성한다.
3. 리펙터링 : 테스트를 통과하기 위해 만든 코드의 모든 중복을 제거하고, 불명확한 것을 명확히 한다.

#### TDD는 어떤 상황에서 해야할까
- 만약 어떤 부분에 대한 코딩을 여러번 해봤고 결과가 어떻게 나올지 뻔하다면 TDD를 하지 않아도 된다.
- 또한 TDD를 했을 때 얻는 것이 적다면 TDD를 하지 않아도 된다.
- 처음해보는 프로그램 주제 / 나에 대한 불확실성이 높은 경우
- 고객의 요구조건이 바뀔 수 있는 프로젝트 / 외부적인 불확실성이 높은 경우
- 개발하는 중에 코드를 많이 바꿔야 된다고 생각하는 경우
- 내가 개발하고 나서 이 코드를 누가 유지보수할지 모르는 경우
- 즉, 불확실성이 높을 때 TDD를 하면 된다.


#### TDD 장점
- 개발자의 방향을 잃지 않게 유지: 현재 자신의 개발 내용 및 진척 상황을 항상 살펴볼 수 있다.
- 품질 높은 소프트웨어 모듈 보유 : 간결한 코드 유지 가능
- 자동화된 단위 테스트 케이스 소유: 개발자가 필요한 시점에 언제든 수행할 수 있으며 시스템의 이상 유무를 바로 확인할 수 있다.
- 사용설명서 & 의사 소통의 수단:  작성된 테스트 케이스는 제품 코드 사용 설명서이자 동시에 다른 개발자와 소통하는 커뮤니케이션 통로가 된다. (제품 코드 API 사용 예시가 된다.)
- 설계 개선 : 테스트 케이스 작성 시 개발에 포함된 다양한 설계요소들에 대해 고민하게 된다. 흔히 테스트하기 어렵다고 생각되는 코드들은 객체 설계 원리 중 기본에 해당하는 원칙들이 잘못 적용됐거나 충분히 고려되지 않았을 가능성이 높다. TDD 진행하면서 테스트가 가능하도록 설계 구조를 고민하다 보면 자연스럽게 디자인을 개선하게 된다.
- 보다 자주 성공한다 : TDD 는 주기를 짧게 설정하도록 권한다. 개발자는 성취감을 자주 느낄 수 있다.

#### TDD 의 한계
- TDD 선구자인 Kent Beck 은 다음 두 가지를  TDD가 현재 접근하기 어려운 분야라고 말한다.
1. 동시성(Concurrency)
2. 보안 등의 비기능적 요소
3. 접근 제한자 메소드 : 현재는 public 메소드만 테스트해도 무방하다는 경향이 대세로 보이지만, 필요에 따라 public 으로 테스트 후 접근 제한자를 수정하는 방법도 있다.
4. GUI : 뷰 레이어와 로직 레이어를 확실히 분리시켜 설계할 필요가 있다.
5. 의존성 모듈 테스트 (target = A but A -> B) : 타겟 A 테스트를 위해 B 도 필요하다. 그러나  B가 아직 준비가 되어 있지 않다면 테스트가 이루어질 수 없다. 보통 이런 경우 B의 Mock객체를 생성하여 B는 문제없음을 가정하고 테스트 한다.
- Updated 9/14 , 접근제한자 메소드 한계 : TDD 단계를 준수하면  Private 메소드는 빨강 – 초록 단계를 지나 리펙토링 단계에서 생성된다. Private 메소드는 새로운 테스트 케이스가 필요한 것이 아니라 이미 통과한 테스트의 리펙토링 결과다. 별도로 접근제한자를 변경해서 테스트할 필요가 없다. 그렇게 되도록 TDD 개발 단계를 준수하자.

참조 
- TDD(테스트 주도 개발)란 : https://gmlwjd9405.github.io/2018/06/03/agile-tdd.html
- TDD(Test-Driven Development) 알아보기 : https://blog.leop0ld.org/posts/test-driven-development/
- Test_Driven Development :  https://soulpark.wordpress.com/2012/09/12/test-driven-development/
