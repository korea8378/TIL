# Head First Design Patterns

## 07월 30일

### 7장 어댑터 패턴과 퍼사드 패턴

#### 개요
- 실제와 다른 인터페이스를 가진 것처럼 보이도록 해보자.
- 특정 인터페이스를 필요로 하는 디자인을 다른 인터페이스를 구현하는 클래스에 적응시킬 수 있다.
- 객체를 감싸서 인터페이스를 단순화시킬 수 있는 다른패턴도 알아보자.

#### 어댑터
- 어댑터는 한 인터페이스를 다른 인터페이스로 변환해주는 역할을 한다.
- 어떤 인터페이스를 클라이언트에서 요구하는 형태의 인터페이스에 적응 시켜주는 역할을 한다.
- 클라이언트로부터 요청을 받아서 새로운 업체에서 제공하는 클래스에서 받아들일 수 있는 형태의 요청으로 변환시켜주는 중개인 역할을 합니다.

#### 클라이언트에서 어댑터를 사용하는 방법
- 1.클라이언트에서 타켓 인터페이스를 사용하여 메소드를 호출함으로써 어댑터에 요청을 한다.
- 2.어댑터에서는 어댑티 인터페이스를 사용하여 그 요청을 어댑티에 대한 메소드 호출로 변환한다.
- 3.클라이언트에서는 호출 결과를 받긴 하지만 중간에 어댑터가 껴 있는지는 알지 못한다.

#### 어댑터 패턴
- 한 클래스의 인터페이스를 클라이언트에서 사용하고자 하는 다른 인터페이스로 변환한다.
- 어댑터를 이용하면 인터페이스 호환성 문제 때문에 같이 쓸 수 없는 클래스들을 연결해서 쓸 수 있다.
- 호환되지 않는 인터페이스를 사용하는 클라이언트를 그대로 활용할 수 있다.
- 인터페이스를 변환해주는 어댑터를 만들면 된다.
- 클라이언트와 구현된 인터페이스를 분리시킬 수 있으며, 나중에 인터페이스가 바뀌더라도 그 변경 내역은 어댑터에 캡슐화되기 때문에 클라이언트는 바뀔 필요가 없다.
- 어댑티를 새로 바뀐 인터페이스로 감쌀 때는 객체 구성을 사용한다. 이런 접근법을 쓰면 어댑티의 어떤 서브클래스에 대해서도 어댑터를 쓸 수 있다는 장점이 있다.
- 타켓 인터페이스만 제대로 지킨다면 나중에 다른 구현을 추가하는 것도 가능하다.

#### 어댑터의 두 종류
- 객체 어댑터
    - 구성을 이용한 패턴
    - 상속을 이용할때보다 보다 유연하게 사용가능하다.
- 클래스 어댑터
    - 다중 상속을 이용한 패턴
    - 자바에서는 다중 상속이 없다.
    - 상속을 이용하면 코드 분량을 줄일 수 있다.
    - 특정 어댑티에만 적용된다는 단점이 있다.

#### 데코레이터와 어댑터
- 두 디자인 패턴의 겉은 비슷해보이더라도 속이 완전다르다.
- 데코레이터
    - 데코레이터가 적용된다는 것은 새로운 책임 또는 행동이 디자인에 추가된다는 것을 의미한다.
    - 커다란 인터페이스를 장식할 때는, 구현해야할 코드가 많아진다.
    - 데코레이트들로 겹겹이 쌓여있다면, 어떤 데코레이터들을 거쳐왔는지 어떤 요청들로 처리되어있는지 알지 못한다.
    - 기존 코드를 고치지 않고 새로운 클래스를 통하여 기능을 추가한다.
- 어댑터
    - 클라이언트와 어댑티를 분리함으로써 클라이언트는 어댑티를 모르고 사용할 수 있다.
    - 클라이언트는 어댑터에서 어떤일 하였는지 알지 못한다.
    - 어댑터를 통하여 추가적인 기능을 처리할 수 있다.
 
#### 퍼사드 패턴
- 어떤 서브시스템의 일련의 인터페이스에 대한 통합된 인터페이스를 제공한다.
- 퍼사드에서 고수준 인터페이스를 정의하기 때문에 서브시스템을 더 쉽게 사용할 수 있다.
- 인터페이스를 단순화시키기 위해서 인터페이스를 변경한다.
- 하나 이상의 클래스의 복잡한 인터페이스를 깔끔하면서도 말쑥한 퍼사드로 덮어준다.
- 어떤 서브시스템에 속한 일련의 복잡한 클래스들을 단순화하고 통합한 클래스를 만들어야 한다.
- 퍼사드 패턴을 이용하면 클라이언트와 서브시스템이 서로 긴말하게 연결되지 않아도 된다.
- 패턴이 어떤 용도로 쓰이는지를 잘 알아둬야 한다.

#### 홈씨어터 켜기
- 1.팝콘 기계를 켠다
- 2.팝콘 튀기기 시작
- 3.전등을 어둡게 조절
- 4.스크린을 내린다.
- 5.프로젝터를 켠다.
- 6.프로젝트로 DVD 신호가 입력되도록 한다.
- 7.프로젝터를 와이드 스크린 모드로 전환한다.
- 8.앰프를 켠다.
- 9.앰프 입력을 DVD로 전환한다.
- 10.앰프를 서라운드 음향 모드로 전환한다.
- 11.앰프 볼륨을 중간(5)으로 설정한다.
- 12.DVD 플레이어를 켠다.
- 13.DVD를 재생한다.
- 위와 같의 여러 클래스의 동작들을 일일이 클라이언트가 호출하기 보다는 하나의 인터페이스(퍼사드)를 통하여 제어 해보자.
- 퍼사드 패턴을 쓰면 훨씬 쓰기 쉬운 인터페이스를 제공하는 퍼사드 클래스를 구현함으로써 복잡한 시스템을 훨씬 쉽게 사용할 수 있다.

#### 어댑터 패턴과 퍼사드의 차이점
- 어댑터 패턴
    - 하나 이상의 클래스의 인터페이스를 클라이언트에서 필요로 하는 인터페이스로 변환한다.
    - 여러 클래스를 사용해야 할 수도 있다.
    - 인터페이스를 변경해서 클라이언트에서 필요로 하는 인터페이스로 적응시키기 위한 용도로 쓰인다.
- 퍼사드 패턴
    - 하나 또는 여려 클래스를 통하여 인터페이스를 만들 수 있다.
    - 어떤 서브시스템에 대한 간단한 인터페이스를 제공하기 위한 용도로 쓰인다.
    - 퍼사드는 인터페이스를 단순화시킬 뿐 아니라 클라이언트와 구성요소들로 이루어진 서브시스템을 분리시키는 역할도 한다.

#### 디자인 원칙 - 최소 지식 원칙 - 정말 친한 친구하고만 얘기하라
- 객체 사이의 상호작용은 될 수 있으면 아주 가까운 친구사이에서만 허용하는 것이 좋다.
- 시스템을 디자인할 때, 어떤 객체든 그 객체와 상호작용을 하는 클래스의 개수에 주의해야 하며, 그런 객체들과 어떤 식으로 상호작용을 하는지에 주의를 기울여야 한다.
- 이 원칙을 잘 따르면 여러 클래스들이 복잡하게 얽혀서 시스템의 한 부분을 변경했을 때 다른 부분까지 줄줄이 고쳐햐 되는 상황을 미리 방지할 수 있다.

#### 최소 지식 원칙의 가이드 라인
- 어떤 메소드에서든지 다음 네 종류의 객체의 메소드만 호출하자
    - 객체 자체
    - 메소드에 매개변수로 전달된 객체
    - 그 메소드에서 생성하거나 인스턴스를 만든 객체
    - 그 객체에 속하는 구성요소
- 모든 원칙은 상황에 따라서 적재적소에 쓰여야한다.
- 각 디자인마다 장단점(추상화 vs 속도, 공간 vs 시간 등)이 있기 때문에 원칙이 어떤 가이드라인을 제시해 주기 하지만, 직접 적용하기 전에 모든 요인들을 살펴봐야 한다.

#### 최소 지식 원칙의 장단점
- 이 원칙을 잘 따르면 객체들 사이의 의존성을 줄이고, 소프트웨어 관리가 더 용이해질 수도 있다.
- 하지만 이 원칙을 적용하다 보면 다른 구성요소에 대한 메소드 호출을 처리하기 위해 래퍼 클래스를 더 만들어야 할 수도 있다.
- 그러다 보면 시스템이 더 복잡해지고, 개발 시간도 늘어나고, 성능이 떨어질 수도 있다.
