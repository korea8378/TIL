# SQL

## 10월 26일

### DBMS Architecture 

#### 쿼리 평가 엔진
* 계획을 세우고 실행하는 DBMS의 핵심 기능을 담당하는 모듈
* 실행계획 : 사용자로부터 입력받은 SQL구문을 분석하고, 어떤 순서로 기억장치의 데이터에 접근 할 지를 결정(
* 접근 메소드 : 데이터에 접근하는 방법

#### 버퍼 매니저
* 특별한 용도로 사용하는 메모리 영역을 확보 한다. 이 메모리 영역을 관리하는 것이 바로 버퍼 매니저.

#### 디스크 용량 매니저
* 데이터베이스는 데이터를 영구적으로 저장해야 한다. 디스크 용량 매니저는 어디에 어떻게 데이터를 저장 할 지를. 관리하며, 데이터의 읽고 쓰기를 제어합니다.

#### 트랜잭션 매니저 & 락 매니저
* 여러 사람들이 사용하게 되면 동시에 데이터베이스에 접근해서 사용하게 된다. 그때 각각의 처리를 트랜잭션이라는 단위로 관리한다. 트랜잭션의 정합성을 유지하면서 실행시키고, 필요한 경우 데이터에 락을 걸어 다른 사람의 요청을 대기시키는 것인 트랜잭션 매니저와 락 매니저의 역할

#### 리커버리 매니저
* 데이터베이스의 데이터는 에러로인한 손실이나 장애가 발생하면 안된다. 이러한 경우를 대비해서 데이터를 정기적으로 백업하고, 문제가 일어났을 때 복구해줘야 하는데 이러한 기능을 리커버리 매니저가 한다.

#### 메모리, 하드디스크

#### 캐시 or 버퍼

#### 데이터 캐시
* 메모리를 이용하여 자주 사용되는 sql문을 저장 한다.

#### 로그 버퍼
* 갱신처리를 할때 사용하게 된다. 동기 or 비동기 여부를 선택해서 사용

#### 트레이드 오프(메모리 휘발성)

#### 커밋 때 처리여부

|이름|데이터 정합성| 성능|
|:---------|:------------|:----|
| 동기처리 | O | X |
| 비동기처리 | X | O |

#### 워킹 메모리
* 정렬 또는 해시 관련 처리를 할 때 사용
* 정렬 : GROUP BY, 집합연산, 윈도우함수등
* 해시 : 테이블등의 결합에서 해시 결합이 사용 되는 때 실행
* 메모리를 초과해서 사용하게 되면 디스크에서 처리하게 되어 있다. 그 이유는 데이터베이스 작업은 메모리가 부족하다고 중간에 중단이 되면 안되기 때문이다. 데이터를 처리하기 때문에 느리더라도 반드시 처리해야한다는 관점을 가지고 있다. 디스크를 사용하게 되면 메모리때보다 현저히 느려지기 때문에 메모리를 어떻게 사용 할 지를 생각하면서 사용(메모리 크기)해야 한다.