# toby-spring

## 03월 19일

### keyword

#### 예외
- 자바 개발자가 가장 신경 쓰기 싫어하는 부분이다.
- 예외 처리코드는 엉망이 되거나 무성의하게 만들어지기 쉽다.

#### 사라진 SQLException
- 예외를 잡고 아무것도 하지 않는 경우는 절대 없어야 한다.

#### 예외처리시 반드시 지켜야 할 핵심 원칙
- 모든 예외는 적절하게 복구되든지 아니면 작업을 중단시키고 운영자 또는 개발자에게 분명하게 통보
- System.out.print()나 e.printStackTrace()를 이용하지 말자.

#### 무의미하고 무책임한 throws
- throws Excpetion을 상위 메서드에게 계속 전파시키는 행동은 하지 말아야 한다.
- 정말 무엇인가 실행중에 예외적인 상황이 발생 할 수 있다는 것인지, 아니면 그냥 습관적으로 복사해서 붙여놓은 것인지 알 수 가 없다.
- 결과적으로 적절한 처리를 통해 복구될 수 있는 예외상황도 제대로 다룰 수 있는 기회를 박탈 당한다.

#### 예외의 종류와 특징
- Error
  - java.lang.Error 클래스의 서브클래스들이다.
  - 시스템에 뭔가 비정상적인 상황이 발생했을 경우에 사용된다.
  - 자바 VM에서 발생 시키는 것이고 어플리케이션 코드에서 잡으려고 하면 안된다.
  - OutOfMemoryError나 ThreadDeath 같은 에러는 catch 블록으로 잡아봤자 아무런 대응 방법이 없기 때문
  - 시스템 레벨에서 특별한 작업을 하는 게 아니라면 애플리케이션에서는 이런 에레에 대한 처리는 신경쓰지 않아도 된다.
- Exception과 체크 예외
  - 개발작들이 만든 어플리케이션 코드의 작업 중에 예외상황이 발생했을 경우에 사용한다.
  - RuntimeException에 속하지 않은 것들이 Exception에 속한다.
  - 체크 예외가 발생할 수 있는 메소드는 사용할 경우 반드시 예외를 처리하는 코드를 함께 작성해야 한다.
  - IOException, SQLExcpetion 등
- RuntimeException과 언체크/런타임 예외
  - 명시적으로 예외를 처리하지 않기 때문에 언체크 예외
  - 명시적으로 예외를 처리해도 상관은 없다.
  - NullPointerException, IllegalArgumentExcetpion 등
  - 개발자의 부주의에 의해서 발생되는 Exception

#### 예외 처리 방법
- 예외 복구
  - 예외 상황을 파악하고 문제를 해결해서 정상 상태로 돌려놓는 것
- 예외처리 회피
  - 예외처리를 자신이 담당하지 않고 자신을 호출한 쪽으로 던져버리는 것
- 예외 전환
  - 예외 회피와 비슷하게 예외를 복구해서 정상적인 상태로는 만들 수 없기 때문에 예외를 메서드 밖으로 던지는 것이다.
  - 하지만 예외 회피와 달리, 발생한 예외를 그대로 넘기는 게 아니라 적절한 예외로 전환해서 던진다는 특징이다.

#### 어플리케이션 예외
- 어플리케이션 자체의 로직에 의해 의도적으로 발생시키고, 반드시 catch 해서 무엇인가 조치를 취하도록 요구하는 예외
- 현재 잔고 가 얼마인지 상관없이 요청한 금액만큼 계좌 잔액을 차감하도록 만드는 개발자는 없을 것이다.
- 첫번째 방법
  - 출금 가능 불가능 여부를 0, 1과 같이 각각의 다른 값을 리턴해준다.
  - 개발자바다 생각하는 특별한 값이 다르기때문에 안 좋다.
  - 결과 값을 체크해야 하는 조건문이 생긴다.
- 두번째 방법
  - 잔고 부족과 같은 예외 상황에서는 비즈니스적인 의미를 띤 예외를 던지도록 만드는 것
  - 의도적인 체크예외를 만든다.

#### 예외 전환
- 굳이 필요하지 않은 catch/throws를 줄여 주는 것
- 로우레벨의 예외를 좀 더 의미 있고 추상화된 예외로 바꿔서 던져 주는 것

#### JDBC 한계(두가지 걸림돌)
- 비표준 SQL
- SQLEXception

#### JDBC 한계 해결법
- DB에러 코드 매핑을 통한 전환(JDBC TEMPLATE 안에 디비별로 같은 EXCEPTION이 일어나게 각각의 디비 EXCEPTION CODE가 매핑 되어있다.)
- DAO 인터페이스와 구현의 분리
  - 인터페이스 메서드에 throw문이 생기기되면 특정 기술에 종속 될 수가 있다.
- 스프링의 DataAccessException 계층구조를 통한 처리
