# DDD(DDD START!)

## 5월 8일

### 2.아키텍처 개요

#### 네 개의 영역
- 표현 : 사용자의 요청을 받아 응용 영역에 전달
- 응용 : 처리 결과를 다시 사용자에게 보여주는 역할, 시스템이 사용자에게 제공해야 할 기능을 구현한다.
- 도메인 : 도메인 모델을 구현
- 인프라스트럭처 : 구현 기술에 대한 것을 다룬다. RDBMS 연동, 메시지큐 등

#### 계층 구조 아키텍처
- 표현 영역과 응용 영역은 도메인 영역을 사용하고, 도메인 영역은 인프라스트럭처 영역을 사용하므로 계층 구조를 적용하기에 적당해 보인다.
- 계층 구조는 상위 계층에서 하위 계층으로의 의존만 존재하고 하위 계층은 상위 계층에 의존하지 않는다.
- 구현의 편리함을 위해 계층 구조를 유연하게 적용 할 수 도 있다.
- 도메인의 복잡도에 따라 응용과 도메인을 분리하기도 하고 한 계층으로 합치기도 한다.

#### DIP
- 의존 역전 원칙
- 추상화한 인터페이스
- 고수준 모듈은 저수준 모듈을 의존해서 안된다.
- 저수준 모듈이 고수준 모듈을 의존하게 만들어야 한다.
- 독립적인 테스트를 쉽게 작성 할 수 있다.

#### 도메인 영역의 주요 구성요소
- 엔티티
    - 도메인의 모델의 데이터를 포함하여 해당 데이터와 관련된 기능을 함께 제공한다.
- 밸류
    - 고유의 식별자를 갖지 않는 주로 개념적으로 하나인 도메인 객체의 속성을 표현할 때 사용된다.
- 애그리거트
    - 애그리거트는 관련된 엔티티와 밸류 객체를 개념적으로 하나로 묶은 것이다.
- 리포지터리
    - 도메인 모델의 영속성을 처리한다.
- 도메인 서비스
    - 특정 엔티티에 속하지 않은 도메인 로직을 제공한다.

#### 엔티티와 밸류
- 도메인 모델의 엔티티와 DB 모델의 엔티티를 같은 것으로 생각하면 안된다.
- 실제 도메인 모델의 엔티티와 DB 관계형 모델의 엔티티는 같은 것이 아니다.
- 두 모델의 가장 큰 차이점은 도메인 모델의 엔티티는 데이터와 함께 도메인 기능을 함께 제공한다는 점이다.
    - ex) 주문을 표현하는 엔티티는 주문과 관련된 데이터뿐만 아니라 배송지 주소 변경을 위한 기능을 함께 제공한다.
- 도메인 모델의 엔티티는 두 개 이상의 데이터가 개념적으로 하나인 경우 밸류 타입을 이용해서 표현 할 수 있다.
